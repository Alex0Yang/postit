<ul class="nav">
  <li>
    <%= link_to "Postit!", root_path, :class => 'brand' %>
  </li>
</ul>

<% if log_in? %>
  <div class="nav_item">
    <%= link_to 'New_Post', new_post_path, class:"btn btn-success btn-small" %>
  </div>
<% end %>

<div class='btn-group nav_item'>
  <button class='btn btn-small dropdown-toggle' data-toggle='dropdown' >
    Categories
    <span class='caret'></span>
  </button>
  <ul class='dropdown-menu'>
    <% Category.all.each do |category| %>
      <li>
      <%= link_to(category_path(category)) do %>
        <%= category.name %> <span class='badge pull-right'><%= category.posts.size %></span>
      <% end %>
      </li>
    <% end %>
    <% if log_in? %>
      <li class='divider'></li>
      <li>
       <%= link_to(new_category_path) do %>
         <i class="icon-plus"></i>
         New Category
       <% end %>
      </li>
    <% end %>
  </ul>
</div>

<% if log_in? %>
  <div class="btn-group nav_item">
    <button class='btn btn-small dropdown-toggle' data-toggle='dropdown' >
      <%= current_user.name %>
      <span class='caret'></span>
    </button>
    <ul class='dropdown-menu'>
      <li>
        <%= link_to edit_user_path(current_user) do %>
          <i class='icon-pencil'></i>
          edit profile
        <% end %>
      </li>
      <li>
        <%= link_to user_path(current_user) do %>
          <i class='icon-user'></i>
          view profile
        <% end %>
      </li>
      <li>
        <%= link_to logout_path, method: :post do %>
          <i class="icon-circle-arrow-left"></i>
          log out
        <% end %>
      </li>
    </ul>
 </div>
<% else %>
  <div class="nav">
    <%= link_to 'Log in', login_path, class:"btn btn-success btn-small" %>
  </div>

  <div class="nav">
    <%= link_to 'Register', register_path, class:"btn btn-success btn-small" %>
  </div>
<% end %>
